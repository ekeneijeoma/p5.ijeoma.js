<html>

<head>
    <style>
    body {
        padding: 0;
    }
    canvas {
        position: absolute;
        left: 0;
        top: 0;
        z-index: -100
    }
    </style>
</head>

<body>
    <button id="play">Play</button>
    <button id="stop">Stop</button>
    <button id="time"></button>
    <button>Click and drag left to right to scrub</button>

    <script language="javascript" src="js/p5.js"></script>
    <script language="javascript" src="js/ijeomamotion.js"></script>
    <script language="javascript" src="../build/p5.ijeomamotion.js"></script>
    <script language="javascript">
    var c1, c2, c3, c4;
    var x1, x2, x3, x4;
    var h;
    var sequence;

    document.getElementById('play').onclick = function() {
        sequence.play()
    }

    document.getElementById('stop').onclick = function() {
        sequence.stop()
    }

    function setup() {
        createCanvas(windowWidth, windowHeight);

        h = height / 4;

        c1 = randomColor(), c2 = randomColor(), c3 = randomColor(), c4 = randomColor();
        x1 = x3 = -width;
        x2 = x4 = width;

        var d = 50;

        sequence = beginSequence();
        easing(Sine.Out)
        tween(d).add("x1", width).add("c1", randomColor());
        tween(d).add("x2", -width).add("c2", randomColor());
        tween(d).add("x3", width).add("c3", randomColor());
        tween(d).add("x4", -width).add("c4", randomColor());
        endSequence();
        reverse();
        repeat();
        play();
    }

    function draw() {
        background(255);

        noStroke();

        fill(c1);
        rect(x1, 0, width, h);
        fill(c2);
        rect(x2, h, width, h);
        fill(c3);
        rect(x3, h * 2, width, h);
        fill(c4);
        rect(x4, h * 3, width, h);

        document.getElementById('time').innerHTML = sequence.getTime();
    }

    function keyPressed() {
        play();
    }

    function mousePressed() {
        pause();
    }

    function mouseReleased() {
        resume();
    }

    function mouseDragged() {
        seek(mouseX / width);
    }

    function randomColor() {
        return color(random(255), random(255), random(255));
    }
    </script>
</body>

</html>
