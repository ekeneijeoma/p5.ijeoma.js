<head>
    <script language="javascript" src="p5.js"></script>
    <script language="javascript" src="ijeomamotion.js"></script>
    <script language="javascript" src="../build/p5.ijeomamotion.js"></script>
    <script language="javascript">
    var c1, c2, c3;
    var y1, y2, y3;
    var w;

    var tl;

    function setup() {
        createCanvas(windowWidth, windowHeight);
        smooth();

        c1 = randomColor(), c2 = randomColor(), c3 = randomColor();
        y1 = y2 = y3 = -height;
        w = width / 5;

        var d = 25;

        tl = beginTimeline();

        beginKeyframe(0);
        tween(d).add("y1", height).add("c1", randomColor());
        endKeyframe();

        beginKeyframe(50);
        tween(d).add("y2", height).add("c2", randomColor());
        endKeyframe();

        beginKeyframe(100);
        tween(d).add("y3", height).add("c3", randomColor());
        endKeyframe();

        endTimeline();

        repeat();
        reverse();
        play();
    }

    function draw() {
        background(255); 

        noStroke();
        fill(c1);
        rect(0, y1, w, height);

        fill(c2);
        rect(w * 2, y2, w, height);

        fill(c3);
        rect(w * 4, y3, w, height);

        var time = tl.get(0).getTime() + " / " + tl.get(0).getDuration();
        fill((tl.get(0).isPlaying() ? color(0, 255, 0) : color(255, 0, 0)));
        text(time, 25, height - 25);

        time = tl.get(1).getTime() + " / " + tl.get(1).getDuration();
        fill((tl.get(1).isPlaying() ? color(0, 255, 0) : color(255, 0, 0)));
        text(time, w * 2 + 25, height - 25);

        time = tl.get(2).getTime() + " / " + tl.get(2).getDuration();
        fill((tl.get(2).isPlaying() ? color(0, 255, 0) : color(255, 0, 0)));
        text(time, w * 4 + 25, height - 25);

        time = tl.getTime() + " / " + tl.getDuration();
        fill(0);
        text(time, width - textWidth(time) - 25, 25);

        noStroke();
        fill(0);
        text('Drag left to right to scrub and press 1 - 3 to go to and play keyframes.', 25, 25);
    }


    function keyPressed() {
        if (key == '1')
            tl.gotoAndPlay(0);
        else if (key == '2')
            tl.gotoAndPlay(50);
        else if (key == '3')
            tl.gotoAndPlay(100);
        else
            tl.play();
    }

    function mousePressed() {
        // tl.play();
        tl.pause();
    }


    function mouseReleased() {
        tl.resume();
    }

    function mouseDragged() {
        tl.seek(norm(mouseX, 0, width));
    }

    function randomColor() {
        return color(random(255), random(255), random(255));
    }
    </script>
    <style>
    body {
        padding: 0;
        margin: 0;
    }
    </style>
</head>

<body>
</body>

</html>