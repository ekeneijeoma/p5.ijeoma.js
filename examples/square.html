<head>
    <style>
    body {
        padding: 0;
        margin: 0;
    }
    div { 
        position: absolute;
        z-index: 100;
        padding: 10px 0 0 10px; 
    }
    </style>
</head>
<body>
    <div>
        <button id="play">Play</button>
        <button id="stop">Stop</button>
        <button id="time"></button>
        <button>Click and drag left to right to scrub</button>
    </div>

    <script language="javascript" src="js/p5.js"></script>
    <script language="javascript" src="js/ijeoma.js"></script>
    <script language="javascript" src="../build/p5.ijeoma.js"></script>
    <script language="javascript">    
    function setup() {
        createCanvas(windowWidth, windowHeight); 

        bgColor = color(0);

        sq = {};
        sq.size = height - height / 3;
        sq.scale = 1;
        sq.points = [
            createVector(0, 0),
            createVector(sq.size, 0),
            createVector(sq.size, sq.size),
            createVector(0, sq.size),
            createVector(0, 0)
        ];
        sq.point = sq.points[0];
        sq.color= randomColor();

        txSize = height - height / 2;

        frames();
        s = beginSequence();
        easing(Quad.Out)
        tween(sq, 'point', sq.points[1], 25)
        relative();
        tween(sq, 'point', sq.points[2], 25)
        tween(sq, 'point', sq.points[3], 25)
        tween(sq, 'point', sq.points[0], 25)
        easing(Bounce.InOut);
        tween(sq, 'scale', 3, 50).relative()
        endSequence();  
        s.repeat().onRepeat(function() {
            bgColor = sq.color;
            sq.color = randomColor();
        })
        .play()
        
        textAlign(CENTER)
        textSize(txSize);

        strokeWeight(5);
    }

    function draw() {
        background(bgColor);

        push();
        translate(width / 2 - sq.size / 2 * sq.scale, height / 2 - sq.size / 2 * sq.scale);
        scale(sq.scale);

        var j = s.currentIndex();

        stroke(sq.color);

        if (s.time() > 1)
            if (j < 4) {
                noFill();
                beginShape();
                for (var i = 0; i <= j; i++)
                    vertex(sq.points[i].x, sq.points[i].y)
                endShape();

                line(sq.points[j].x, sq.points[j].y, sq.point.x, sq.point.y)
            } else {
                fill(sq.color);
                rect(0, 0, sq.size, sq.size)
            }
        pop();

        noStroke()
        fill(sq.color);
        text(s.repeatTime() + 1, width / 2, height / 2 + txSize / 3 );

        document.getElementById('time').innerHTML = s.getTime() | 0;
    }

    function randomColor() {
        return color(random(255), random(255), random(255))
    }
    </script>
</body> 